---
slug: /bad6cbee
---
⭐网络扫描工具

`nmap`（Network Mapper）是一个开源的网络扫描和安全审计工具，用于发现网络中的设备、识别主机和服务、检查开放端口等。它被广泛用于网络管理、漏洞检测和安全审计。

## 1. 简介

`nmap` 可以扫描单个主机或整个子网，帮助你识别网络中的设备、运行的服务、操作系统信息、开放的端口等。它广泛应用于网络发现、系统安全检测以及漏洞扫描等领域。🛠️

你可以通过 `sudo apt install nmap` 安装它。

### nmap 的基本语法

```bash
nmap [选项] <目标>
```

> 注意：使用 `nmap` 进行网络扫描时，可能需要 `sudo` 权限，以便访问某些网络接口和端口。

## 2. 常见操作概览 📋

| 操作                     | 命令格式                               | 说明                                                        |
|--------------------------|---------------------------------------|-------------------------------------------------------------|
| 扫描单个主机               | `nmap <目标IP或域名>`                 | 对目标主机进行基本的端口扫描，识别开放的端口。               |
| 扫描多个主机               | `nmap <目标IP范围>`                   | 对一系列主机进行扫描。                                       |
| 扫描特定端口               | `nmap -p <端口号> <目标>`             | 扫描目标主机的指定端口。                                     |
| 扫描所有端口               | `nmap -p- <目标>`                     | 扫描目标主机的所有端口。                                     |
| 扫描服务版本               | `nmap -sV <目标>`                     | 获取目标主机上运行服务的版本信息。                           |
| 探测操作系统               | `nmap -O <目标>`                      | 探测目标主机的操作系统信息。                                 |
| 扫描特定子网               | `nmap <子网地址>/24`                  | 对整个子网进行扫描（例如扫描 192.168.1.0/24）。               |
| 执行隐匿扫描               | `nmap -sS <目标>`                     | 使用 SYN 扫描进行端口扫描，以避免被目标主机检测。            |
| 输出扫描结果到文件         | `nmap -oN <文件名> <目标>`            | 将扫描结果保存到文件中，便于后续查看。                       |
| 扫描并显示拓扑图           | `nmap --traceroute <目标>`            | 获取并显示目标主机的网络拓扑图（路径）信息。                 |

## 3. 命令示例 ⚡

### 3.1 扫描单个主机

扫描单个主机的开放端口，显示哪些端口是开放的：

```bash
nmap 192.168.1.1
```

示例输出：
```
Starting Nmap 7.80 ( https://nmap.org ) at 2024-11-22 05:47 CST
Nmap scan report for 192.168.1.1
Host is up (0.0075s latency).
Not shown: 994 closed ports
PORT     STATE    SERVICE
22/tcp   filtered ssh
23/tcp   filtered telnet
53/tcp   open     domain
80/tcp   open     http
5080/tcp open     onscreen
8080/tcp open     http-proxy
```

此命令会扫描 `192.168.1.1` 主机的常见端口，输出每个端口的状态（开放、关闭等）。

### 3.2 扫描多个主机

你可以通过 IP 地址范围或子网掩码扫描多个主机。例如，扫描 `192.168.1.1` 到 `192.168.1.10` 的主机：

```bash
nmap 192.168.1.1-10
```

你也可以扫描整个子网（例如 `192.168.1.0/24`）：

```bash
nmap 192.168.1.0/24
```

这会扫描该子网中所有主机的开放端口。

### 3.3 扫描指定端口

如果你只对某些端口感兴趣，可以通过 `-p` 选项指定端口。例如，扫描 `192.168.1.1` 上的 22 和 80 端口：

```bash
nmap -p 22,80 192.168.1.1
```

你还可以使用端口范围进行扫描，比如扫描 `80` 到 `100` 端口：

```bash
nmap -p 80-100 192.168.1.1
```

### 3.4 扫描所有端口

要扫描目标主机的所有端口，可以使用 `-p-` 选项：

```bash
nmap -p- 192.168.1.1
```

这会扫描目标主机的所有 65535 个端口，适用于全面的端口扫描。

### 3.5 扫描服务版本

如果你想了解目标主机上运行的服务版本，可以使用 `-sV` 选项：

```bash
nmap -sV 192.168.1.1
```

此命令会列出目标主机上开放端口的服务及其版本信息。

### 3.6 探测操作系统

`nmap` 还可以尝试探测目标主机的操作系统信息：

```bash
sudo nmap -O 192.168.1.1
```

```bash title='部分输出信息'
Device type: general purpose
Running: Linux 5.X
OS CPE: cpe:/o:linux:linux_kernel:5
OS details: Linux 5.0 - 5.4
```

通过分析返回的信息，`nmap` 会尽力识别目标主机的操作系统及其版本。

### 3.7 执行隐匿扫描（SYN 扫描）

如果你想进行隐匿扫描，避免被目标主机检测，可以使用 `-sS` 选项进行 SYN 扫描：

```bash
sudo nmap -sS 192.168.1.1
```

此命令不会完全建立 TCP 连接，而是发送 SYN 包来探测端口状态，因此更难被检测。

### 3.8 输出扫描结果到文件

如果你需要将扫描结果保存到文件中，可以使用 `-oN` 选项：

```bash
nmap -oN scan_results.txt 192.168.1.1
```

此命令会将扫描结果保存到 `scan_results.txt` 文件中，方便后续查看和分析。

## 4. 常用选项 📝

- `-p <端口>`：指定要扫描的端口或端口范围（例如：`-p 22,80,443`）。
- `-sS`：使用 SYN 扫描（隐匿扫描），通过发送 SYN 包探测端口。
- `-sV`：扫描并显示服务版本信息。
- `-O`：探测目标主机的操作系统。
- `-oN <文件>`：将扫描结果保存到指定文件。
- `-T<等级>`：设置扫描速度和精度（`-T4` 比较常用，适用于较快的扫描）。
- `-A`：启用高级扫描，进行操作系统探测、服务版本扫描、脚本扫描等。
- `-v`：启用详细输出，提供更多扫描过程的信息。
- `-iL <文件>`：从文件中读取 IP 地址列表，扫描多个目标。

## 5. 小贴士 💡

- **扫描速度与精度**：`nmap` 提供了多种扫描类型和选项，可以平衡扫描的速度和精度。在生产环境中，使用较高精度的扫描可能会增加扫描时间，低精度扫描则更为快速。
- **合法性问题**：在使用 `nmap` 进行扫描时，请确保你有合法权限对目标主机进行扫描。未授权的扫描可能会违反网络使用协议，甚至触犯法律。
- **与防火墙互动**：很多防火墙会阻止或限制来自未知 IP 地址的扫描，`nmap` 的扫描可能会被拦截或产生虚假结果。你可以尝试使用 `-T4` 等选项加速扫描，并避免过于频繁的扫描请求。

## 6. 总结 🎯

`nmap` 是一个功能强大的网络扫描工具，它不仅能够发现网络中的设备和服务，还能够帮助你进行网络安全审计。通过灵活的选项和扫描类型，`nmap` 可以满足各种网络管理和安全需求。无论是扫描开放端口、探测操作系统，还是执行隐匿扫描，`nmap` 都能为你提供深入的网络信息和分析。🔐

希望这篇教程帮助你掌握如何使用 `nmap` 进行网络扫描和安全审计！别忘了收藏**在线知识库**（ [www.zxzsk.com](http://www.zxzsk.com) ）哦！😊
