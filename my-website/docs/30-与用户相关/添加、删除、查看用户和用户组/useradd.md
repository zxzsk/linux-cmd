---
slug: /b382b98e
---
⭐添加用户

## 1. 简介

`useradd` 命令是 Linux 系统中用来添加新用户的工具。通过 `useradd`，系统管理员可以创建一个新的用户账号并配置相关属性。创建用户后，可以使用 `passwd` 命令设置密码。掌握 `useradd` 命令是管理员管理系统用户的重要技能。👨‍💼

## 2. 常见操作概览

| 操作               | 命令格式                                   | 说明                                   |
|--------------------|-----------------------------------------|----------------------------------------|
| 创建一个新用户       | `sudo useradd <用户名>`                  | 创建一个新的用户账户。                |
| 设置用户密码         | `sudo passwd <用户名>`                   | 设置新用户的密码。                    |
| 创建新用户并设置密码 | `sudo useradd -m <用户名> && sudo passwd <用户名>` | 创建用户并立即设置密码。               |
| 创建指定用户组的用户  | `sudo useradd -g <组名> <用户名>`        | 创建并将新用户加入指定的组。            |
| 创建用户并设置主目录 | `sudo useradd -m -d <目录路径> <用户名>`  | 创建用户并指定用户的主目录。           |
| 查看用户信息         | `sudo chage -l <用户名>`                 | 查看用户密码状态（如过期时间、锁定等）。 |

## 3. 命令示例

### 3.1 创建一个新用户

要创建一个没有其他特别配置的新用户，只需使用 `useradd` 命令：

```bash
$ sudo useradd <用户名>
```

例如，创建一个名为 `john` 的用户：

```bash
$ sudo useradd john
```

这将会创建一个 `john` 用户，但是该用户没有密码、主目录或其他详细信息。🎯

### 3.2 创建新用户并设置密码

创建用户后，你通常需要为其设置密码：

```bash
$ sudo passwd <用户名>
```

例如，为 `john` 用户设置密码：

```bash
$ sudo passwd john
```

系统会要求你输入并确认密码。💡

### 3.3 创建新用户并设置主目录

如果你希望为用户创建一个默认的主目录（如 `/home/john`），可以使用 `-m` 参数：

```bash
$ sudo useradd -m <用户名>
```

例如：

```bash
$ sudo useradd -m john
```

这会自动为用户 `john` 创建主目录 `/home/john`，并将该目录设置为用户的工作目录。📂

### 3.4 创建用户并指定主目录

如果你想为用户指定一个不同的主目录路径，可以使用 `-d` 选项：

```bash
$ sudo useradd -m -d /custom/path <用户名>
```

例如：

```bash
$ sudo useradd -m -d /data/john john
```

这会将用户 `john` 的主目录设置为 `/data/john`。📁

### 3.5 创建新用户并加入指定用户组

你可以使用 `-g` 选项将新用户加入指定的用户组：

```bash
$ sudo useradd -g <组名> <用户名>
```

例如，将用户 `john` 添加到 `admin` 组：

```bash
$ sudo useradd -g admin john
```

这会创建 `john` 用户并将其加入到 `admin` 用户组。👥

### 3.6 查看用户信息

要查看用户的详细信息（如密码是否过期、锁定状态等），可以使用 `chage` 命令：

```bash
$ sudo chage -l <用户名>
```

例如：

```bash
$ sudo chage -l john
```

这会显示 `john` 用户的密码过期信息等。📝

## 4. 常用选项解释

- **`-m`**：为用户创建主目录。
- **`-d <目录>`**：指定用户的主目录路径。
- **`-g <组名>`**：将用户添加到指定的用户组。
- **`-G <附加组>`**：将用户添加到多个附加组（可以用逗号分隔多个组名）。
- **`-s <shell>`**：为用户指定登录 shell，默认是 `/bin/bash`。
- **`-e <日期>`**：设置用户账户的过期日期。
- **`-c <注释>`**：为用户账户添加注释（例如，全名）。
- **`-u <UID>`**：指定用户的 UID（用户标识符）。
- **`-r`**：创建一个系统用户，该用户无法登录。通常用于创建服务用户。

### 示例：创建带有多个附加组的用户

```bash
$ sudo useradd -m -G sudo,developers john
```

这会创建一个名为 `john` 的用户，主目录为 `/home/john`，并将其添加到 `sudo` 和 `developers` 组中。👨‍💻

## 5. 小贴士

- **使用 `-m` 创建用户**：确保为新用户创建主目录，这样他们就可以在自己的目录中存储文件。
- **配置用户组**：合理配置用户组，可以帮助你管理权限，提升系统的安全性和管理效率。🔑
- **确保使用强密码**：为用户设置密码时，始终确保密码强度符合安全要求。🔒

## 6. 总结

`useradd` 命令是 Linux 系统中添加新用户的基础工具。通过它，你可以创建普通用户、配置用户的主目录、添加用户组等。合理使用 `useradd` 命令，可以帮助系统管理员轻松管理和控制系统用户。📊

通过理解和熟练使用 `useradd` 命令，你将能够高效地管理你的 Linux 系统用户，确保系统安全和可操作性。💡

---

希望这篇教程能帮助你更好地理解并使用 `useradd` 命令，创建和管理用户！😊
